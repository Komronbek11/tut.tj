<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Контакты - Донишгоҳи Технологии Тоҷикистон</title>
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/toastify-js/src/toastify.min.css">
    <style>
        :root {
            --bg-color: #f7f8fa;
            --text-color-primary: #111827;
            --text-color-secondary: #6b7280;
            --card-bg: #ffffff;
            --border-color: #e5e7eb;
            --accent-color: #2563eb;
            --input-bg: #ffffff;
            --toast-success-bg: #10b981;
            --toast-error-bg: #ef4444;
        }
        html.dark {
            --bg-color: #0d1117;
            --text-color-primary: #e2e8f0;
            --text-color-secondary: #94a3b8;
            --card-bg: #161b22;
            --border-color: #30363d;
            --accent-color: #3b82f6;
            --input-bg: #1f2937;
        }
        html { scroll-behavior: smooth; }
        body { 
            font-family: 'Inter', sans-serif; 
            background-color: var(--bg-color); 
            color: var(--text-color-primary);
            transition: background-color 0.3s ease, color 0.3s ease;
        }
        .form-input {
            background-color: var(--input-bg);
            border: 1px solid var(--border-color);
            border-radius: 0.75rem;
            padding: 0.75rem 1rem;
            width: 100%;
            transition: all 0.2s ease-in-out;
        }
        .form-input:focus {
            outline: none;
            border-color: var(--accent-color);
            box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.3);
        }
        .btn-primary {
            background-color: var(--accent-color);
            color: white;
            padding: 0.75rem 1.5rem;
            border-radius: 0.75rem;
            font-weight: 600;
            transition: all 0.2s ease-in-out;
            display: inline-flex;
            align-items: center;
            justify-content: center;
        }
        .btn-primary:hover:not(:disabled) {
            opacity: 0.9;
            transform: translateY(-2px);
        }
        .btn-primary:disabled {
            opacity: 0.7;
            cursor: not-allowed;
        }
        /* ✔️ Стили для Toastify */
        .toastify {
            padding: 14px 20px;
            color: #fff;
            display: inline-flex;
            align-items: center;
            gap: 12px;
            border-radius: 12px;
            box-shadow: 0 10px 25px -5px rgba(0,0,0,0.1), 0 10px 10px -5px rgba(0,0,0,0.04);
            font-family: 'Inter', sans-serif;
            opacity: 0;
            transition: all 0.4s cubic-bezier(0.21, 1.02, 0.73, 1);
        }
        .toastify.on { opacity: 1; }
        .toast-close { display: none; }
    </style>
</head>
<body class="py-8 sm:py-12">

    <div class="container mx-auto px-4 max-w-6xl">
        <header class="text-center mb-12">
            <h1 class="text-4xl sm:text-5xl font-extrabold tracking-tight">Наши контакты</h1>
            <p class="text-lg mt-3 opacity-70 max-w-2xl mx-auto" style="color: var(--text-color-secondary);">
                Мы всегда на связи и готовы ответить на ваши вопросы.
            </p>
        </header>

        <main class="grid grid-cols-1 lg:grid-cols-2 gap-8 md:gap-12">
            
            <div class="bg-card p-6 sm:p-8 rounded-2xl border" style="border-color: var(--border-color); background-color: var(--card-bg);">
                <h2 class="text-2xl font-bold mb-6">Свяжитесь с нами</h2>
                
                <div class="space-y-4 mb-8">
                    <div class="flex items-start gap-4">
                        <svg class="w-6 h-6 flex-shrink-0 mt-1" style="color: var(--accent-color);" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z" /><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 11a3 3 0 11-6 0 3 3 0 016 0z" /></svg>
                        <div>
                            <h3 class="font-semibold">Адрес</h3>
                            <p class="text-sm" style="color: var(--text-color-secondary);">проспект Негмата Карабаева, 63/3, Душанбе, Таджикистан</p>
                        </div>
                    </div>
                    <div class="flex items-start gap-4">
                        <svg class="w-6 h-6 flex-shrink-0 mt-1" style="color: var(--accent-color);" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z" /></svg>
                        <div>
                            <h3 class="font-semibold">Телефон</h3>
                            <p class="text-sm" style="color: var(--text-color-secondary);">+992 (37) 234-79-89</p>
                        </div>
                    </div>
                    <div class="flex items-start gap-4">
                         <svg class="w-6 h-6 flex-shrink-0 mt-1" style="color: var(--accent-color);" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z" /></svg>
                        <div>
                            <h3 class="font-semibold">Email</h3>
                            <p class="text-sm" style="color: var(--text-color-secondary);">rectorat@tut.tj, info@tut.tj</p>
                        </div>
                    </div>
                </div>

                <form id="contact-form" class="space-y-4">
                    <input type="text" id="name" name="name" class="form-input" placeholder="Ваше имя" required>
                    <input type="email" id="email" name="email" class="form-input" placeholder="Ваш Email" required>
                    <input type="tel" id="phone" name="phone" class="form-input" placeholder="Номер телефона (необязательно)">
                    <textarea id="message" name="message" rows="5" class="form-input" placeholder="Ваше сообщение" required></textarea>
                    
                    <button type="submit" id="submit-button" class="btn-primary w-full">
                        <svg id="spinner" class="animate-spin -ml-1 mr-3 h-5 w-5 text-white hidden" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"><circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle><path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path></svg>
                        <span id="button-text">Отправить сообщение</span>
                    </button>
                </form>
            </div>

            <div class="rounded-2xl overflow-hidden border" style="border-color: var(--border-color); min-height: 400px;">
                 <iframe src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d3119.539003892795!2d68.7561823158083!3d38.56157017962367!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x38b5d1a447a10795%3A0x2f778a6a5d41498a!2sTechnological%20University%20of%20Tajikistan!5e0!3m2!1sen!2s!4v1688500000000!5m2!1sen!2s" width="100%" height="100%" style="border:0;" allowfullscreen="" loading="lazy" referrerpolicy="no-referrer-when-downgrade"></iframe>
            </div>
        </main>
    </div>

    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-database.js"></script>
    <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/toastify-js"></script>

    <script>
        const themeMatcher = window.matchMedia('(prefers-color-scheme: dark)');
        const toggleDarkTheme = isDark => document.documentElement.classList.toggle('dark', isDark);
        toggleDarkTheme(themeMatcher.matches);
        themeMatcher.addEventListener('change', e => toggleDarkTheme(e.matches));

        const firebaseConfig = {
  apiKey: "AIzaSyCJy3eKFL23mIOVM2ruEdVhI1mIVsIp6cU",
  authDomain: "university-chat-15114.firebaseapp.com",
  databaseURL: "https://university-chat-15114-default-rtdb.asia-southeast1.firebasedatabase.app",
  projectId: "university-chat-15114",
  storageBucket: "university-chat-15114.firebasestorage.app",
  messagingSenderId: "109943351862",
  appId: "1:109943351862:web:57cbecba075494a1f5c697",
  measurementId: "G-44LH6764ET"
};
        firebase.initializeApp(firebaseConfig);
        const db = firebase.database();
        const messagesRef = db.ref('messages');

        // ✔️ ФУНКЦИЯ ДЛЯ СОВРЕМЕННЫХ УВЕДОМЛЕНИЙ
        const showToast = (text, type = 'success') => {
            const icons = {
                success: '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" width="22" height="22"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd" /></svg>',
                error: '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" width="22" height="22"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z" clip-rule="evenodd" /></svg>'
            };
            const backgroundColor = type === 'success' ? getComputedStyle(document.documentElement).getPropertyValue('--toast-success-bg') : getComputedStyle(document.documentElement).getPropertyValue('--toast-error-bg');
            
            Toastify({
                text: `${icons[type]} ${text}`,
                duration: 4000,
                gravity: "bottom",
                position: "right",
                style: { background: backgroundColor.trim() },
                escapeMarkup: false,
            }).showToast();
        };

        const contactForm = document.getElementById('contact-form');
        const submitButton = document.getElementById('submit-button');
        const buttonText = document.getElementById('button-text');
        const spinner = document.getElementById('spinner');

        contactForm.addEventListener('submit', function(e) {
            e.preventDefault();
            
            submitButton.disabled = true;
            buttonText.textContent = 'Отправка...';
            spinner.classList.remove('hidden');

            const messageData = {
                name: document.getElementById('name').value,
                email: document.getElementById('email').value,
                phone: document.getElementById('phone').value, // ✔️ Получаем значение телефона
                message: document.getElementById('message').value,
                timestamp: firebase.database.ServerValue.TIMESTAMP,
                isRead: false
            };

            messagesRef.push(messageData)
                .then(() => {
                    showToast('Спасибо! Ваше сообщение успешно отправлено.', 'success'); // ✔️ Заменено на Toast
                    contactForm.reset();
                })
                .catch((error) => {
                    console.error("Ошибка при отправке: ", error);
                    showToast('Произошла ошибка. Пожалуйста, попробуйте еще раз.', 'error'); // ✔️ Заменено на Toast
                })
                .finally(() => {
                    submitButton.disabled = false;
                    buttonText.textContent = 'Отправить сообщение';
                    spinner.classList.add('hidden');
                });
        });
    </script>
</body>
</html>
